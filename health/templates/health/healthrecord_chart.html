{% extends "base.html" %}
{% load static %}

{% block title %}Health Charts{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-2xl font-bold mb-4">Health Charts</h1>

    <div class="flex flex-wrap gap-4 mb-4">
        <!-- Category Filter -->
        <div class="input-field">
            <select id="categoryFilter">
                <option value="" selected>All Categories</option>
                {% for category in categories %}
                <option value="{{ category.id }}">{{ category.name }}</option>
                {% endfor %}
            </select>
            <label>Category</label>
        </div>

        <!-- Disease Filter -->
        <div class="input-field">
            <select id="diseaseFilter">
                <option value="" selected>All Diseases</option>
                {% for disease in disease_categories %}
                <option value="{{ disease.id }}">{{ disease.name }}</option>
                {% endfor %}
            </select>
            <label>Disease</label>
        </div>

        <!-- Title selection removed; legend is interactive for filtering -->
    </div>

    <div class="chart-container" style="position: relative; height:50vh; width:70vw">
        <canvas id="healthChart"></canvas>
    </div>

    <div class="flex flex-wrap gap-4 mt-4">
        <button id="lineChartBtn" class="btn">Line</button>
        <button id="areaChartBtn" class="btn">Area</button>
        <button id="barChartBtn" class="btn">Bar</button>
        <button id="resetZoomBtn" class="btn">Reset Zoom</button>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@1.2.1"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@4.1.0/dist/chartjs-plugin-annotation.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script src="{% static 'js/health_chart.js' %}"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
{% endblock %}